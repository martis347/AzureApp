<div class="category">
  <md-list>
    <button class="expand-button" md-icon-button color="primary" (click)="expanded = !expanded">
      <md-icon class="md-24" *ngIf="!expanded">expand_more</md-icon>
      <md-icon class="md-24" *ngIf="expanded">expand_less</md-icon>
    </button >
    <md-form-field>
      <input mdInput placeholder="Category Name" [(ngModel)]="categoryData.name">
    </md-form-field>
    <button class="delete-button" mdTooltip="Delete category" color="primary" [mdTooltipPosition]="'after'" (click)="removeCategory()" md-icon-button *ngIf="!isLastCategory">
      <md-icon class="md-24">delete</md-icon>
    </button >
    <md-list-item *ngFor="let dishes of (expanded ? categoryData.dishes : [])">
      <div class="dish">

        <md-form-field *ngFor="let dish of dishes.mainDishes; let i = index; trackBy:trackByFn">
          <input mdInput placeholder="Main Dish" (keydown)="onDishValueChange($event, dishes.mainDishes)" [(ngModel)]="dishes.mainDishes[i]" >
        </md-form-field>

        <md-form-field *ngFor="let dish of dishes.sideDishes; let i = index; trackBy:trackByFn">
          <input mdInput placeholder="Soup" (keydown)="onDishValueChange($event, dishes.sideDishes)" [(ngModel)]="dishes.sideDishes[i]">
        </md-form-field>

        <md-form-field >
          <input mdInput type="number" step="0.1" placeholder="Price â‚¬" [(ngModel)]="dishes.price">
        </md-form-field>
        <button class="remove-button" md-icon-button (click)="removeDish(dishes)" *ngIf="categoryData.dishes.length > 1">
          <md-icon class="md-24" color="accent" >remove</md-icon>
        </button>
      </div>
    </md-list-item>
    <button class="add-button" md-icon-button (click)="addDish()" *ngIf="expanded">
      <md-icon class="md-24" color="accent">add</md-icon>
    </button >
  </md-list>
</div>
